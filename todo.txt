- nostr

    RELEASE:
        - fix matrix login!
        - change everywhere new logo
            - simplex group
            - matrix element group
        - zapstore publish
        - github release
        - deploy client web on bitblik.app

CRASH!!!!!!!!!!!!!!!!!!!!
test-coordinator  | Unhandled exception:
test-coordinator  | Bad state: Cannot add event after closing
test-coordinator  | #0      _StreamController.add (dart:async/stream_controller.dart:617)
test-coordinator  | #1      RelayManager._handleIncomingMessage (package:ndk/domain_layer/usecases/relay_manager.dart:400)
test-coordinator  | #2      RelayManager._startListeningToSocket.<anonymous closure> (package:ndk/domain_layer/usecases/relay_manager.dart:358
)
test-coordinator  | #3      _RootZone.runUnaryGuarded (dart:async/zone.dart:1778)
test-coordinator  | #4      _BufferingStreamSubscription._sendData (dart:async/stream_impl.dart:381)
test-coordinator  | #5      _DelayedData.perform (dart:async/stream_impl.dart:573)
test-coordinator  | #6      _PendingEvents.handleNext (dart:async/stream_impl.dart:678)
test-coordinator  | #7      _PendingEvents.schedule.<anonymous closure> (dart:async/stream_impl.dart:649)
test-coordinator  | #8      _microtaskLoop (dart:async/schedule_microtask.dart:40)
test-coordinator  | #9      _startMicrotaskLoop (dart:async/schedule_microtask.dart:49)
test-coordinator  | #10     _runPendingImmediateCallback (dart:isolate-patch/isolate_patch.dart:127)
test-coordinator  | #11     _Timer._runTimers (dart:isolate-patch/timer_impl.dart:430)
test-coordinator  | #12     _Timer._handleMessage (dart:isolate-patch/timer_impl.dart:454)
test-coordinator  | #13     _RawReceivePort._handleMessage (dart:isolate-patch/isolate_patch.dart:193)
test-coordinator exited with code 255 (restarting)


    - NEXT
        - expired offer is as active but cannot do anything with it (cannot resume offer in state...)
        - offers from custom coordinators should still show coordinator info on offer details screen
        - review terms of usage
        - info + checkbox risk of refund BLIK acceptance
        - should confirm offer data from coordinator and not only rely on nostr KIND_OFFER event, for offer list and details
        - offer details screen should subscribe to offer status change and update status in UI
          - and show timers (reserved time left, blik code validity time left)
          - this is needed when it's not a get_my_active_offer, since status updates it's only for active per key
        - on invalidBlik status, it should be possible to cancel which would also cancel the reservation and go back to funded
            - needs support code in coordinator workflow
        - coordinator metadata kind-0
            - name
            - avatar picture
            - relays (nip-65)
        - coordinator discovery on bootstrap many relays (purplepag.es)
        - whitelist coordinators:
            - from bitblik followed list
            - list of default accepted coordinator's npubs in client, overridable by env vars for test.bitblik.app

        - timer 120s on /confirm-blik and after inform of 48h (?) it will automatically be settled in taker's favor
        - retry to subscribe in nostr service for KIND_COORDINATOR_REQUEST (client requests) onError
        - in progress offers should be listed in offer list with that in progress, timer
        - if maker confirms during conflict (made mistake) the taker conflict screen should listen to such status and show process paying screen
        - add custom coordinator by npub (store in client preferences)
        - past/finished/history offers for given neko
        - relays for coordinator fetched from nip-65
            - if non existent and configured in .env broadcast nip-65 event with relay list
        - remove circular dependency between coordinator/nostr services !!
        - use ndk.accounts instead of single signer (multiple nekos)
        - fix the tests for nostr service not available
        - public stats / coordinator info should not require client pubkey (rpc signing request)

- list of finished offers in menu
- rate coordinators on nostr (find which NIP for ratings)
- premium % above market price for maker
- NWC wallet integration
    - ndk.wallets (NWC) from leo's branch

- reputation mode (maybe using nostr profiles and WoT?)

- settle maker invoice after 1 hour even if not confirmed so that we can resolve conflict having the sats
- fidelity bond for taker
- while in /taker-conflict if maker confirms it should refresh and show taker success

- better details on MakerSuccessScreen
- save the failed payment reason (could not get an invoice from lnurl/ no route /??) and show it on takerFailedPayment screen

- timer countdown of 2min for validity of blik code in both taker/maker screens with info what to do next.
- in taker screen show when maker received blik ( blikReceived -> blikSentToMaker)

- sound effects when status changes
- local notifications when status changes

======
- dark theme

======
- extract common code between coordinator & client (offer model)
- coordinator /admin/* for admin actions on allowed pubkeys
- stats like https://plebqr.com/ for coordinator
- why it doesn't work well on mobile browsers (vanadium, ironfox) -> https://developer.chrome.com/docs/devtools/remote-debugging
- webpushs

